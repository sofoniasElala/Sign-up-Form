<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Sign up Form</title>
        <link rel="stylesheet" href="./style.css">
    </head>

    <body>
        <div class="side-image">
            <img src="./halie-west-25xggax4bSA-unsplash.jpg" alt="green leaf plant" id="plant">
            <div class="logo-div">
                <img src="./odin-lined.png" alt="odin logo" id="logo">
                <span>ODIN</span>
            </div>
        </div>

        <div class="form">
            <header>
                <p>This is not a real online service! You know you need something like this in your life to help you realize your deepest dreams. <br>Sign up <em>now</em> to get started.<br><br> You know you want to.</p>
            </header>
            <form action="#" method="get">
               <fieldset>
                    <h2>Let's do this!</h2>
                    <div>
                        <label class="left-label" for="first_name">FIRST NAME</label>
                        <input type="text" id="first_name" name="first_name">
                        <label class="right-label" for="last_name">LAST NAME</label>
                        <input type="text" id="last_name" name="last_name">
                    </div>
                    <div>
                        <label class="left-label" for="email">EMAIL</label>
                        <input type="email" id="email" name="email" required>
                        <label class="right-label" for="phone_number">PHONE NUMBER</label>
                        <input type="tel" id="phone_number" name="phone_number">
                    </div>
                    <div>
                        <label class="left-label" for="password">PASSWORD</label>
                        <input class="error" type="password" id="password" name="password">
                        <label class="right-label" for="confirm_password">CONFIRM PASSWORD</label>
                        <input class="error" type="password" id="confirm_password" name="confirm_password">
                        <span class="error">* Passwords do not match</span>
                    </div>
                </fieldset>
                <button type="submit">Create Account</button>
            </form>
            <p id="login">Already have an account? <span>Log in</span></p>
        </div>

        <script>
            let email = document.querySelector('#email');
            let phone_number = document.querySelector('#phone_number');
            let password = document.querySelector('#password');
            let confirmPassword = document.querySelector("#confirm_password");

            confirmPassword.addEventListener('input', ()=> {
                console.log(password.value.substring(0, confirmPassword.value.length),  confirmPassword.value)
                 if(password.value.substring(0, confirmPassword.value.length) == confirmPassword.value){
                    confirmPassword.style.borderColor = 'green';
                    password.style.borderColor = 'green';
                 } else {
                    confirmPassword.style.borderColor = 'red';
                    password.style.borderColor = 'red';
                 }
            })

            let btn = document.querySelector("form button");
            
            btn.addEventListener("click", (e)=> {
                let validState = true;
                e.preventDefault();
                if(password.value != '' | confirmPassword.value != '' ){
                if(password.value !== confirmPassword.value){
                    document.querySelector("span[class=error]").style.visibility = 'visible';
                    document.querySelector("input[class=error]").style.borderColor = 'red';
                    document.querySelector("input[class=error]~input[class=error]").style.borderColor = 'red';
                    validState = false;
                } }
                if(!email.checkValidity()){
                    email.reportValidity();
                    validState = false;
                }

                if(validState) document.querySelector("form").submit();
                
            })

        </script>

    </body>
</html>